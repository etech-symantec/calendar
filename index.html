
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>ì¼ì •ëª©ë¡ ëŒ€ì‹œë³´ë“œ</title>
        <style>
            /* í°íŠ¸ í¬ê¸° 30% ì¶•ì†Œ (16px -> 11~12px) */
            body { font-family: 'Pretendard', sans-serif; padding: 15px; background-color: #f8f9fa; color: #333; font-size: 11px; }
            h2 { color: #2c3e50; border-bottom: 2px solid #34495e; padding-bottom: 8px; margin: 0 0 10px 0; font-size: 16px; }
            .sync-time { color: #7f8c8d; font-size: 10px; margin-bottom: 15px; text-align: right; }
            
            /* ë²„íŠ¼ ê·¸ë£¹ */
            .controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
            .btn-group { display: flex; gap: 5px; }
            .btn { border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: bold; transition: 0.2s; }
            
            .btn-blue { background-color: #e0f2fe; color: #0369a1; border: 1px solid #bae6fd; }
            .btn-blue.active, .btn-blue:hover { background-color: #0ea5e9; color: white; }
            
            .btn-yellow { background-color: #fef9c3; color: #854d0e; border: 1px solid #fde047; }
            .btn-yellow.active, .btn-yellow:hover { background-color: #eab308; color: white; }
            
            .btn-all { background-color: #f3f4f6; color: #4b5563; border: 1px solid #e5e7eb; }
            .btn-all.active, .btn-all:hover { background-color: #6b7280; color: white; }

            /* ìš”ì•½ ë°•ìŠ¤ */
            .summary-box { background: #fff; border-left: 4px solid #e11d48; padding: 12px; margin-bottom: 20px; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
            .summary-box h3 { margin: 0 0 8px 0; color: #e11d48; font-size: 13px; }
            .summary-box ul { margin: 0; padding-left: 20px; line-height: 1.5; color: #333; }
            .summary-box li { padding: 3px 0; border-bottom: 1px dashed #ffe4e6; }
            .summary-box li:last-child { border-bottom: none; }

            /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
            .table-container { background: #fff; padding: 0; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); overflow-x: auto; max-height: 85vh; }
            table { border-collapse: collapse !important; width: 100% !important; }
            table, th, td { border: 1px solid #d1d5db !important; padding: 6px 8px !important; text-align: center; white-space: nowrap; font-size: 11px; }
            
            thead tr { background-color: #e5e7eb !important; }
            th { background-color: #e5e7eb !important; font-weight: bold !important; position: sticky; top: 0; z-index: 10; color: #374151; }
            tbody tr:hover td { background-color: #f3f4f6 !important; }
            
            .hidden-row { display: none !important; }
            .hidden-cell { display: none !important; }
        </style>
    </head>
    <body>
        <div class="controls">
            <h2>ğŸ“… ì¼ì • ëŒ€ì‹œë³´ë“œ</h2>
            <div class="btn-group">
                <button class="btn btn-blue active" onclick="applyFilter('blue')">ğŸ”µ ë¸”ë£¨íŒ€</button>
                <button class="btn btn-yellow" onclick="applyFilter('yellow')">ğŸŸ¡ ì˜ë¡œìš°íŒ€</button>
                <button class="btn btn-all" onclick="applyFilter('all')">ğŸ“‹ ì „ì²´ë³´ê¸°</button>
            </div>
        </div>
        <div class="summary-box">
            <h3>ğŸ”¥ ì„ íƒëœ íŒ€ì˜ ì˜¤ëŠ˜ ì¼ì •</h3>
            <ul id="today-list"><li>ë°ì´í„° ë¶„ì„ ì¤‘...</li></ul>
        </div>
        <p class="sync-time">Update: 2026-02-24 08:39:44</p>

        <div class="table-container" id="table-wrapper">
            <p>âš ï¸ í…Œì´ë¸”ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì„ íƒì ì˜¤ë¥˜)</p>
        </div>

        <script>
            // âœ… íŒ€ì› ëª…ë‹¨
            const blueTeam = ["ì‹ í˜¸ê·¼", "ê¹€ìƒë¬¸", "í™ì§„ì˜", "ê°•ì„±ì¤€", "ìœ¤íƒœë¦¬", "ë°•ë™ì„"];
            const yellowTeam = ["ë°±ì°½ë ¬", "ê¶Œë¯¼ì£¼", "í™©í˜„ì„", "ì´í¬ì°¬", "ì´ìˆ˜ì¬", "ì´ìœ¤ì¬"];
            let currentFilter = 'blue';

            document.addEventListener("DOMContentLoaded", function() {
                // 1. [ê°€ì¥ ì¤‘ìš”] í‘œ í‰íƒ„í™” (Flattening)
                // ì›ë³¸ í‘œì˜ rowspanì„ ë‹¤ í’€ì–´ì„œ ëª¨ë“  í–‰ì´ ê½‰ ì°¬ ë°ì´í„°ë¥¼ ê°–ê²Œ ë§Œë“­ë‹ˆë‹¤.
                flattenTableOnLoad();
                
                // 2. ì´ˆê¸° í•„í„° ì ìš©
                applyFilter('blue');
            });

            function flattenTableOnLoad() {
                const wrapper = document.getElementById('table-wrapper');
                const table = wrapper.querySelector('table');
                if (!table) return;

                const trs = Array.from(table.querySelectorAll('tr'));
                const grid = [];

                // ê°€ìƒ ë°”ë‘‘íŒì— ë°ì´í„° ì±„ìš°ê¸°
                trs.forEach((tr, r) => {
                    if (!grid[r]) grid[r] = [];
                    let c = 0;
                    Array.from(tr.children).forEach(cell => {
                        // ì´ë¯¸ ì±„ì›Œì§„ ì¹¸(rowspan ì˜í–¥) ê±´ë„ˆë›°ê¸°
                        while (grid[r][c]) c++;
                        
                        const tagName = cell.tagName;
                        const innerHTML = cell.innerHTML;
                        const rowspan = parseInt(cell.getAttribute('rowspan') || 1, 10);
                        const colspan = parseInt(cell.getAttribute('colspan') || 1, 10);

                        for (let rr = 0; rr < rowspan; rr++) {
                            for (let cc = 0; cc < colspan; cc++) {
                                if (!grid[r + rr]) grid[r + rr] = [];
                                // ëª¨ë“  ì¹¸ì— ë°ì´í„° ë³µì œ (rowspan ì œê±°ë¨)
                                grid[r + rr][c + cc] = { tagName, innerHTML };
                            }
                        }
                    });
                });

                // í‰íƒ„í™”ëœ ë°ì´í„°ë¡œ í…Œì´ë¸” ë‹¤ì‹œ ê·¸ë¦¬ê¸°
                let newHtml = '<thead>';
                // ì²« ì¤„ì€ í—¤ë”ë¡œ ê°€ì •
                if (grid.length > 0) {
                    newHtml += '<tr>';
                    grid[0].forEach(cell => {
                        newHtml += `<${cell.tagName}>${cell.innerHTML}</${cell.tagName}>`;
                    });
                    newHtml += '</tr>';
                }
                newHtml += '</thead><tbody>';

                for (let r = 1; r < grid.length; r++) {
                    newHtml += '<tr>';
                    if (grid[r]) {
                        grid[r].forEach(cell => {
                            newHtml += `<${cell.tagName}>${cell.innerHTML}</${cell.tagName}>`;
                        });
                    }
                    newHtml += '</tr>';
                }
                newHtml += '</tbody>';
                
                table.innerHTML = newHtml;
            }

            function applyFilter(team) {
                currentFilter = team;
                
                // ë²„íŠ¼ ìŠ¤íƒ€ì¼
                document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`.btn-${team}`).classList.add('active');

                const rows = document.querySelectorAll('.table-container tbody tr');
                let visibleRows = [];

                // 1. í•„í„°ë§ (ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°)
                rows.forEach(row => {
                    // ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” (ì´ì „ ë³‘í•© í•´ì œ)
                    row.classList.remove('hidden-row');
                    row.style.backgroundColor = '';
                    row.querySelectorAll('th, td').forEach(c => {
                        c.classList.remove('hidden-cell');
                        c.setAttribute('rowspan', 1);
                        c.style.color = '';
                        c.style.fontWeight = '';
                    });

                    const tds = row.querySelectorAll('td');
                    if (tds.length < 3) return;

                    const name = tds[tds.length - 1].innerText.trim(); // ë³´í†µ ë§ˆì§€ë§‰ì´ ì´ë¦„
                    
                    let isVisible = false;
                    if (team === 'all') isVisible = true;
                    else if (team === 'blue') isVisible = blueTeam.some(m => name.includes(m));
                    else if (team === 'yellow') isVisible = yellowTeam.some(m => name.includes(m));

                    if (isVisible) {
                        visibleRows.push(row);
                    } else {
                        row.classList.add('hidden-row');
                    }
                });

                // 2. [í•µì‹¬] ë³´ì´ëŠ” í–‰ë“¤ë¼ë¦¬ ë‚ ì§œ ì¬ë³‘í•© (Visual Merge)
                if (visibleRows.length > 0) {
                    let lastDateCell = visibleRows[0].querySelector('th');
                    let lastDateText = lastDateCell ? lastDateCell.innerText.trim() : "";
                    let spanCount = 1;

                    for (let i = 1; i < visibleRows.length; i++) {
                        const row = visibleRows[i];
                        const dateCell = row.querySelector('th');
                        if (!dateCell) continue;

                        const currentDateText = dateCell.innerText.trim();

                        if (currentDateText === lastDateText && currentDateText !== "") {
                            // ë‚ ì§œê°€ ê°™ìœ¼ë©´ í˜„ì¬ ì¹¸ ìˆ¨ê¸°ê³ , ìœ— ì¹¸ ëŠ˜ë¦¬ê¸°
                            dateCell.classList.add('hidden-cell');
                            spanCount++;
                            if (lastDateCell) lastDateCell.setAttribute('rowspan', spanCount);
                        } else {
                            // ë‹¤ë¥´ë©´ ë¦¬ì…‹
                            lastDateCell = dateCell;
                            lastDateText = currentDateText;
                            spanCount = 1;
                        }
                    }
                }

                updateSummaryAndHighlight(visibleRows);
            }

            function updateSummaryAndHighlight(visibleRows) {
                const today = new Date();
                const tM = today.getMonth() + 1;
                const tD = today.getDate();
                
                const isToday = (text) => {
                    if(!text) return false;
                    const clean = text.replace(/\s+/g, '');
                    const nums = clean.match(/\d+/g);
                    if(!nums || nums.length < 2) return false;
                    let m = parseInt(nums[0], 10);
                    let d = parseInt(nums[1], 10);
                    if(nums.length >= 3 && parseInt(nums[0]) > 2000) {
                        m = parseInt(nums[1], 10);
                        d = parseInt(nums[2], 10);
                    }
                    return (m === tM && d === tD);
                };

                const ul = document.getElementById('today-list');
                ul.innerHTML = '';
                let todayCount = 0;
                let currentGroupIsToday = false;

                visibleRows.forEach(row => {
                    const dateCell = row.querySelector('th');
                    
                    // ìˆ¨ê²¨ì§€ì§€ ì•Šì€ ë‚ ì§œ ì¹¸(ëŒ€í‘œ ì¹¸)ì„ ë§Œë‚  ë•Œë§Œ ë‚ ì§œ ê²€ì‚¬
                    if (dateCell && !dateCell.classList.contains('hidden-cell')) {
                        currentGroupIsToday = isToday(dateCell.innerText);
                    }

                    if (currentGroupIsToday) {
                        // í•˜ì´ë¼ì´íŠ¸
                        row.style.backgroundColor = '#fff1f2';
                        row.querySelectorAll('td').forEach(c => c.style.color = '#9f1239');
                        const visibleTh = row.querySelector('th:not(.hidden-cell)');
                        if(visibleTh) visibleTh.style.color = '#9f1239';

                        // ìš”ì•½ ì¶”ê°€
                        const tds = row.querySelectorAll('td');
                        if (tds.length >= 3) {
                            const time = tds[0].innerText.trim();
                            const title = tds[1].innerText.trim();
                            const name = tds[2].innerText.trim();
                            
                            const li = document.createElement('li');
                            li.innerText = `[${name}] ${title} (${time})`;
                            ul.appendChild(li);
                            todayCount++;
                        }
                    }
                });

                if (todayCount === 0) {
                    const li = document.createElement('li');
                    li.style.color = '#999';
                    li.innerText = 'ì„ íƒëœ íŒ€ì˜ ì˜¤ëŠ˜ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤. ğŸ‰';
                    ul.appendChild(li);
                }
            }
        </script>
    </body>
    </html>
    